<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LeetCode Full Stats - perumalhacks</title>
  <style>
    body {
      background-color: #121212;
      color: white;
      font-family: 'Fira Code', monospace;
      padding: 20px;
    }
    h1 {
      margin-bottom: 0.2em;
    }
    .stats {
      margin-bottom: 2em;
      line-height: 1.6;
    }
    .stat-item {
      margin-bottom: 0.3em;
    }
    .heatmap {
      display: flex;
      flex-wrap: wrap;
      max-width: 700px;
    }
    .day {
      width: 12px;
      height: 12px;
      margin: 1px;
      border-radius: 3px;
      background-color: #2a2a2a;
      cursor: default;
      transition: background-color 0.3s;
      position: relative;
    }
    .day:hover::after {
      content: attr(data-date) ": " attr(data-count) " submissions";
      position: absolute;
      background: #333;
      color: #fff;
      padding: 4px 8px;
      border-radius: 4px;
      top: -28px;
      white-space: nowrap;
      font-size: 10px;
      pointer-events: none;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10;
    }
    /* Heatmap color scale based on count */
    .count-0 { background-color: #2a2a2a; }
    .count-1 { background-color: #214f2f; }
    .count-2 { background-color: #2a703a; }
    .count-3 { background-color: #44a340; }
    .count-4 { background-color: #8cc665; }
    .count-5 { background-color: #d6e685; }
  </style>
</head>
<body>

  <h1>LeetCode Full Stats for <em>perumalhacks</em></h1>
  
  <div class="stats" id="stats">
    <!-- Stats will be injected here -->
  </div>

  <h2>Submission Activity Heatmap</h2>
  <div class="heatmap" id="heatmap"></div>

  <script>
    // Sample JSON data (replace this with actual fetched data)
    const data = {
      status: "success",
      message: "retrieved",
      totalSolved: 274,
      totalQuestions: 3571,
      easySolved: 123,
      totalEasy: 880,
      mediumSolved: 136,
      totalMedium: 1852,
      hardSolved: 15,
      totalHard: 839,
      acceptanceRate: 83.39,
      ranking: 404652,
      contributionPoints: 1275,
      reputation: 29,
      submissionCalendar: {
        "1722384000": 4,
        "1722470400": 3,
        "1722729600": 3,
        // Add more timestamps here...
        "1749081600": 1,
        "1749168000": 1
      }
    };

    function unixToDate(ts) {
      // ts is seconds since epoch, convert to YYYY-MM-DD string
      const date = new Date(ts * 1000);
      return date.toISOString().slice(0, 10);
    }

    function createStatsHTML(d) {
      return `
        <div class="stat-item"><strong>Ranking:</strong> #${d.ranking.toLocaleString()}</div>
        <div class="stat-item"><strong>Reputation:</strong> ${d.reputation}</div>
        <div class="stat-item"><strong>Contribution Points:</strong> ${d.contributionPoints}</div>
        <div class="stat-item"><strong>Total Solved:</strong> ${d.totalSolved} / ${d.totalQuestions}</div>
        <div class="stat-item"><strong>Easy Solved:</strong> ${d.easySolved} / ${d.totalEasy}</div>
        <div class="stat-item"><strong>Medium Solved:</strong> ${d.mediumSolved} / ${d.totalMedium}</div>
        <div class="stat-item"><strong>Hard Solved:</strong> ${d.hardSolved} / ${d.totalHard}</div>
        <div class="stat-item"><strong>Acceptance Rate:</strong> ${d.acceptanceRate}%</div>
      `;
    }

    function getHeatmapColorClass(count) {
      // Map submission count to color class (max 5)
      if (count >= 5) return 'count-5';
      if (count === 4) return 'count-4';
      if (count === 3) return 'count-3';
      if (count === 2) return 'count-2';
      if (count === 1) return 'count-1';
      return 'count-0';
    }

    function renderHeatmap(calendar) {
      const container = document.getElementById('heatmap');
      const sortedTimestamps = Object.keys(calendar).sort((a,b) => a-b);

      sortedTimestamps.forEach(ts => {
        const count = calendar[ts];
        const dateStr = unixToDate(Number(ts));
        const div = document.createElement('div');
        div.className = 'day ' + getHeatmapColorClass(count);
        div.setAttribute('data-date', dateStr);
        div.setAttribute('data-count', count);
        container.appendChild(div);
      });
    }

    // Inject stats
    document.getElementById('stats').innerHTML = createStatsHTML(data);

    // Render heatmap
    renderHeatmap(data.submissionCalendar);
  </script>

</body>
</html>
